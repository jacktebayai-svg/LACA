(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[715],{3456:(e,t,s)=>{"use strict";s.d(t,{$n:()=>r.default,Zp:()=>o,In:()=>l});var r=s(6801),a=s(9944);s(1428);let o=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:"bg-platinum rounded-2xl shadow-card p-6 sm:p-8 ".concat(s),children:t})},n={"chevron-right":(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"}),calendar:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),user:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}),check:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}),send:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"}),sparkles:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m11-13l-1-1m2 0l-1 1m-2 11l-1-1m2 0l-1 1M12 21a9 9 0 110-18 9 9 0 010 18z"}),"message-circle":(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"})},l=e=>{let{name:t,className:s="w-6 h-6"}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n[t]})}},6801:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var r=s(9944);s(1428);let a=e=>{let{children:t,variant:s="primary",leftIcon:a,className:o,...n}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-semibold px-6 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold transition-all duration-300 ease-out-quint disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-slate text-ivory hover:bg-charcoal shadow-elevated",secondary:"bg-transparent text-slate border-2 border-smoke hover:border-slate"}[s]," ").concat(o),...n,children:[a&&(0,r.jsx)("span",{className:"mr-2",children:a}),t]})}},7251:(e,t,s)=>{Promise.resolve().then(s.bind(s,8817)),Promise.resolve().then(s.bind(s,6801))},8817:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(9944),a=s(1428),o=s(3456);function n(){let[e,t]=(0,a.useState)([{id:"init",role:"assistant",text:"Welcome! How can I help you with your studies today?"}]),[s,n]=(0,a.useState)(""),[l,i]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),u=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})},[e]);let m=async r=>{if(r.preventDefault(),!s.trim()||l)return;let a={id:Date.now().toString(),role:"user",text:s},o=(Date.now()+1).toString(),d={id:o,role:"assistant",text:""};t(e=>[...e,a,d]),n(""),i(!0),c(null);try{let r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,history:e})});if(!r.ok||!r.body){let e=await r.text();throw Error(e||"Failed to get a response from the server.")}let a=r.body.getReader(),n=new TextDecoder,l="";for(;;){let{done:e,value:s}=await a.read();if(e)break;l+=n.decode(s,{stream:!0}),t(e=>e.map(e=>e.id===o?{...e,text:l}:e))}}catch(s){console.error(s);let e=s instanceof Error?s.message:"An unknown error occurred.";c("Sorry, I couldn't get a response."),t(t=>t.map(t=>t.id===o?{...t,text:"Error: ".concat(e)}:t))}finally{i(!1)}};return(0,r.jsxs)(o.Zp,{className:"flex flex-col h-[600px]",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(o.In,{name:"sparkles",className:"w-6 h-6 text-gold"}),(0,r.jsx)("h2",{className:"text-xl font-playfair font-semibold text-slate ml-2",children:"Student Assistant"})]}),(0,r.jsxs)("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4 bg-ivory p-4 rounded-xl border border-smoke","aria-live":"polite",children:[e.map(e=>(0,r.jsxs)("div",{className:"flex items-start gap-2.5 ".concat("user"===e.role?"justify-end":""),children:["assistant"===e.role&&(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gold/20 flex-shrink-0 flex items-center justify-center",children:(0,r.jsx)(o.In,{name:"message-circle",className:"w-5 h-5 text-gold"})}),(0,r.jsx)("div",{className:"p-3 rounded-xl max-w-xs md:max-w-sm ".concat("user"===e.role?"bg-slate text-ivory rounded-br-none":"bg-smoke/60 text-charcoal rounded-bl-none"),children:(0,r.jsx)("p",{className:"text-sm ".concat(l&&"assistant"===e.role&&""===e.text?"animate-pulse":""),style:{whiteSpace:"pre-wrap"},children:""===e.text?"...":e.text})})]},e.id)),(0,r.jsx)("div",{ref:u})]}),d&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2 px-1",children:d}),(0,r.jsxs)("form",{onSubmit:m,className:"mt-4 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:"Ask a question...",className:"w-full p-3 border-2 border-smoke rounded-xl focus:outline-none focus:ring-2 focus:ring-gold transition",disabled:l,"aria-label":"Your message"}),(0,r.jsx)(o.$n,{type:"submit",disabled:l||!s.trim(),className:"!p-3 !rounded-xl","aria-label":"Send message",children:(0,r.jsx)(o.In,{name:"send",className:"w-5 h-5"})})]})]})}}},e=>{e.O(0,[695,274,358],()=>e(e.s=7251)),_N_E=e.O()}]);